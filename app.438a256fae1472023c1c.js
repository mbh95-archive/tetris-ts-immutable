(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(t,e,r){"use strict";r.r(e),r.d(e,"version",function(){return mn}),r.d(e,"Collection",function(){return E}),r.d(e,"Iterable",function(){return bn}),r.d(e,"Seq",function(){return Z}),r.d(e,"Map",function(){return xe}),r.d(e,"OrderedMap",function(){return yr}),r.d(e,"List",function(){return nr}),r.d(e,"Stack",function(){return kr}),r.d(e,"Set",function(){return Ar}),r.d(e,"OrderedSet",function(){return nn}),r.d(e,"Record",function(){return cn}),r.d(e,"Range",function(){return Fr}),r.d(e,"Repeat",function(){return vn}),r.d(e,"is",function(){return lt}),r.d(e,"fromJS",function(){return yn}),r.d(e,"hash",function(){return vt}),r.d(e,"isImmutable",function(){return z}),r.d(e,"isCollection",function(){return w}),r.d(e,"isKeyed",function(){return g}),r.d(e,"isIndexed",function(){return S}),r.d(e,"isAssociative",function(){return k}),r.d(e,"isOrdered",function(){return A}),r.d(e,"isValueObject",function(){return ft}),r.d(e,"get",function(){return ie}),r.d(e,"getIn",function(){return Nr}),r.d(e,"has",function(){return ne}),r.d(e,"hasIn",function(){return Vr}),r.d(e,"merge",function(){return me}),r.d(e,"mergeDeep",function(){return be}),r.d(e,"mergeWith",function(){return ge}),r.d(e,"mergeDeepWith",function(){return Se}),r.d(e,"remove",function(){return se}),r.d(e,"removeIn",function(){return fe}),r.d(e,"set",function(){return ue}),r.d(e,"setIn",function(){return ce}),r.d(e,"update",function(){return pe}),r.d(e,"updateIn",function(){return ae});var n=5,i=1<<n,o=i-1,s={};function u(t){t&&(t.value=!0)}function a(){}function c(t){return void 0===t.size&&(t.size=t.__iterate(f)),t.size}function h(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?c(t)+e:e}function f(){return!0}function l(t,e,r){return(0===t&&!v(t)||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function p(t,e){return d(t,e,0)}function _(t,e){return d(t,e,e)}function d(t,e,r){return void 0===t?r:v(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function v(t){return t<0||0===t&&1/t==-1/0}var y="@@__IMMUTABLE_ITERABLE__@@";function w(t){return Boolean(t&&t[y])}var m="@@__IMMUTABLE_KEYED__@@";function g(t){return Boolean(t&&t[m])}var b="@@__IMMUTABLE_INDEXED__@@";function S(t){return Boolean(t&&t[b])}function k(t){return g(t)||S(t)}var E=function(t){return w(t)?t:Z(t)},O=function(t){function e(t){return g(t)?t:$(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(E),T=function(t){function e(t){return S(t)?t:Q(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(E),P=function(t){function e(t){return w(t)&&!k(t)?t:X(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(E);E.Keyed=O,E.Indexed=T,E.Set=P;var I="@@__IMMUTABLE_SEQ__@@";function R(t){return Boolean(t&&t[I])}var D="@@__IMMUTABLE_RECORD__@@";function M(t){return Boolean(t&&t[D])}function z(t){return w(t)||M(t)}var x="@@__IMMUTABLE_ORDERED__@@";function A(t){return Boolean(t&&t[x])}var C=0,L=1,B=2,j="function"==typeof Symbol&&Symbol.iterator,q="@@iterator",K=j||q,F=function(t){this.next=t};function N(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function W(){return{value:void 0,done:!0}}function V(t){return!!G(t)}function U(t){return t&&"function"==typeof t.next}function H(t){var e=G(t);return e&&e.call(t)}function G(t){var e=t&&(j&&t[j]||t[q]);if("function"==typeof e)return e}F.prototype.toString=function(){return"[Iterator]"},F.KEYS=C,F.VALUES=L,F.ENTRIES=B,F.prototype.inspect=F.prototype.toSource=function(){return this.toString()},F.prototype[K]=function(){return this};var J=Object.prototype.hasOwnProperty;function Y(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var Z=function(t){function e(t){return null==t?it():z(t)?t.toSeq():function(t){var e=ut(t);if(e)return e;if("object"==typeof t)return new et(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){for(var n=r.length,i=0;i!==n;){var o=r[e?n-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var r=this._cache;if(r){var n=r.length,i=0;return new F(function(){if(i===n)return{value:void 0,done:!0};var o=r[e?n-++i:i++];return N(t,o[0],o[1])})}return this.__iteratorUncached(t,e)},e}(E),$=function(t){function e(t){return null==t?it().toKeyedSeq():w(t)?g(t)?t.toSeq():t.fromEntrySeq():M(t)?t.toSeq():ot(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(Z),Q=function(t){function e(t){return null==t?it():w(t)?g(t)?t.entrySeq():t.toIndexedSeq():M(t)?t.toSeq().entrySeq():st(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(Z),X=function(t){function e(t){return(w(t)&&!k(t)?t:Q(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(Z);Z.isSeq=R,Z.Keyed=$,Z.Set=X,Z.Indexed=Q,Z.prototype[I]=!0;var tt=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[h(this,t)]:e},e.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length,i=0;i!==n;){var o=e?n-++i:i++;if(!1===t(r[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var r=this._array,n=r.length,i=0;return new F(function(){if(i===n)return{value:void 0,done:!0};var o=e?n-++i:i++;return N(t,o,r[o])})},e}(Q),et=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return J.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length,o=0;o!==i;){var s=n[e?i-++o:o++];if(!1===t(r[s],s,this))break}return o},e.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length,o=0;return new F(function(){if(o===i)return{value:void 0,done:!0};var s=n[e?i-++o:o++];return N(t,s,r[s])})},e}($);et.prototype[x]=!0;var rt,nt=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=H(this._collection),n=0;if(U(r))for(var i;!(i=r.next()).done&&!1!==t(i.value,n++,this););return n},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=H(this._collection);if(!U(r))return new F(W);var n=0;return new F(function(){var e=r.next();return e.done?e:N(t,n++,e.value)})},e}(Q);function it(){return rt||(rt=new tt([]))}function ot(t){var e=Array.isArray(t)?new tt(t):V(t)?new nt(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new et(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function st(t){var e=ut(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ut(t){return Y(t)?new tt(t):V(t)?new nt(t):void 0}var at="@@__IMMUTABLE_MAP__@@";function ct(t){return Boolean(t&&t[at])}function ht(t){return ct(t)&&A(t)}function ft(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function lt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(ft(t)&&ft(e)&&t.equals(e))}var pt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function _t(t){return t>>>1&1073741824|3221225471&t}var dt=Object.prototype.valueOf;function vt(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;t>4294967295;)e^=t/=4294967295;return _t(e)}(t);case"string":return t.length>Et?function(t){var e=Pt[t];void 0===e&&(e=yt(t),Tt===Ot&&(Tt=0,Pt={}),Tt++,Pt[t]=e);return e}(t):yt(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?_t(t.hashCode(t)):(t.valueOf!==dt&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),function(t){var e;if(bt&&void 0!==(e=gt.get(t)))return e;if(void 0!==(e=t[kt]))return e;if(!mt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[kt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}e=++St,1073741824&St&&(St=0);if(bt)gt.set(t,e);else{if(void 0!==wt&&!1===wt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(mt)Object.defineProperty(t,kt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[kt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[kt]=e}}return e}(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return yt(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function yt(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return _t(e)}var wt=Object.isExtensible,mt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var gt,bt="function"==typeof WeakMap;bt&&(gt=new WeakMap);var St=0,kt="__immutablehash__";"function"==typeof Symbol&&(kt=Symbol(kt));var Et=16,Ot=255,Tt=0,Pt={},It=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=At(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,n=xt(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e,n){return t(e,n,r)},e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}($);It.prototype[x]=!0;var Rt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this,n=0;return e&&c(this),this._iter.__iterate(function(i){return t(i,e?r.size-++n:n++,r)},e)},e.prototype.__iterator=function(t,e){var r=this,n=this._iter.__iterator(L,e),i=0;return e&&c(this),new F(function(){var o=n.next();return o.done?o:N(t,e?r.size-++i:i++,o.value,o)})},e}(Q),Dt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){return t(e,e,r)},e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(L,e);return new F(function(){var e=r.next();return e.done?e:N(t,e.value,e.value,e)})},e}(X),Mt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){if(e){Ut(e);var n=w(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}},e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(L,e);return new F(function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){Ut(n);var i=w(n);return N(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}})},e}($);function zt(t){var e=Gt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Jt,e.__iterateUncached=function(e,r){var n=this;return t.__iterate(function(t,r){return!1!==e(r,t,n)},r)},e.__iteratorUncached=function(e,r){if(e===B){var n=t.__iterator(e,r);return new F(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===L?C:L,r)},e}function xt(t,e,r){var n=Gt(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,i){var o=t.get(n,s);return o===s?i:e.call(r,o,n,t)},n.__iterateUncached=function(n,i){var o=this;return t.__iterate(function(t,i,s){return!1!==n(e.call(r,t,i,s),i,o)},i)},n.__iteratorUncached=function(n,i){var o=t.__iterator(B,i);return new F(function(){var i=o.next();if(i.done)return i;var s=i.value,u=s[0];return N(n,u,e.call(r,s[1],u,t),i)})},n}function At(t,e){var r=this,n=Gt(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=zt(t);return e.reverse=function(){return t.flip()},e}),n.get=function(r,n){return t.get(e?r:-1-r,n)},n.has=function(r){return t.has(e?r:-1-r)},n.includes=function(e){return t.includes(e)},n.cacheResult=Jt,n.__iterate=function(r,n){var i=this,o=0;return n&&c(t),t.__iterate(function(t,s){return r(t,e?s:n?i.size-++o:o++,i)},!n)},n.__iterator=function(n,i){var o=0;i&&c(t);var s=t.__iterator(B,!i);return new F(function(){var t=s.next();if(t.done)return t;var u=t.value;return N(n,e?u[0]:i?r.size-++o:o++,u[1],t)})},n}function Ct(t,e,r,n){var i=Gt(t);return n&&(i.has=function(n){var i=t.get(n,s);return i!==s&&!!e.call(r,i,n,t)},i.get=function(n,i){var o=t.get(n,s);return o!==s&&e.call(r,o,n,t)?o:i}),i.__iterateUncached=function(i,o){var s=this,u=0;return t.__iterate(function(t,o,a){if(e.call(r,t,o,a))return u++,i(t,n?o:u-1,s)},o),u},i.__iteratorUncached=function(i,o){var s=t.__iterator(B,o),u=0;return new F(function(){for(;;){var o=s.next();if(o.done)return o;var a=o.value,c=a[0],h=a[1];if(e.call(r,h,c,t))return N(i,n?c:u++,h,o)}})},i}function Lt(t,e,r,n){var i=t.size;if(l(e,r,i))return t;var o=p(e,i),s=_(r,i);if(o!=o||s!=s)return Lt(t.toSeq().cacheResult(),e,r,n);var u,a=s-o;a==a&&(u=a<0?0:a);var c=Gt(t);return c.size=0===u?u:t.size&&u||void 0,!n&&R(t)&&u>=0&&(c.get=function(e,r){return(e=h(this,e))>=0&&e<u?t.get(e+o,r):r}),c.__iterateUncached=function(e,r){var i=this;if(0===u)return 0;if(r)return this.cacheResult().__iterate(e,r);var s=0,a=!0,c=0;return t.__iterate(function(t,r){if(!a||!(a=s++<o))return c++,!1!==e(t,n?r:c-1,i)&&c!==u}),c},c.__iteratorUncached=function(e,r){if(0!==u&&r)return this.cacheResult().__iterator(e,r);if(0===u)return new F(W);var i=t.__iterator(e,r),s=0,a=0;return new F(function(){for(;s++<o;)i.next();if(++a>u)return{value:void 0,done:!0};var t=i.next();return n||e===L||t.done?t:N(e,a-1,e===C?void 0:t.value[1],t)})},c}function Bt(t,e,r,n){var i=Gt(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var u=!0,a=0;return t.__iterate(function(t,o,c){if(!u||!(u=e.call(r,t,o,c)))return a++,i(t,n?o:a-1,s)}),a},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var u=t.__iterator(B,o),a=!0,c=0;return new F(function(){var t,o,h;do{if((t=u.next()).done)return n||i===L?t:N(i,c++,i===C?void 0:t.value[1],t);var f=t.value;o=f[0],h=f[1],a&&(a=e.call(r,h,o,s))}while(a);return i===B?t:N(i,o,h,t)})},i}function jt(t,e){var r=g(t),n=[t].concat(e).map(function(t){return w(t)?r&&(t=O(t)):t=r?ot(t):st(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===n.length)return t;if(1===n.length){var i=n[0];if(i===t||r&&g(i)||S(t)&&S(i))return i}var o=new tt(n);return r?o=o.toKeyedSeq():S(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=n.reduce(function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}},0),o}function qt(t,e,r){var n=Gt(t);return n.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var s=0,u=!1;return function t(a,c){a.__iterate(function(o,a){return(!e||c<e)&&w(o)?t(o,c+1):(s++,!1===i(o,r?a:s-1,n)&&(u=!0)),!u},o)}(t,0),s},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=t.__iterator(n,i),s=[],u=0;return new F(function(){for(;o;){var t=o.next();if(!1===t.done){var a=t.value;if(n===B&&(a=a[1]),e&&!(s.length<e)||!w(a))return r?t:N(n,u++,a,t);s.push(o),o=a.__iterator(n,i)}else o=s.pop()}return{value:void 0,done:!0}})},n}function Kt(t,e,r){e||(e=Yt);var n=g(t),i=0,o=t.toSeq().map(function(e,n){return[n,e,i++,r?r(e,n,t):e]}).valueSeq().toArray();return o.sort(function(t,r){return e(t[3],r[3])||t[2]-r[2]}).forEach(n?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),n?$(o):S(t)?Q(o):X(o)}function Ft(t,e,r){if(e||(e=Yt),r){var n=t.toSeq().map(function(e,n){return[e,r(e,n,t)]}).reduce(function(t,r){return Nt(e,t[1],r[1])?r:t});return n&&n[0]}return t.reduce(function(t,r){return Nt(e,t,r)?r:t})}function Nt(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||n>0}function Wt(t,e,r,n){var i=Gt(t),o=new tt(r).map(function(t){return t.size});return i.size=n?o.max():o.min(),i.__iterate=function(t,e){for(var r,n=this.__iterator(L,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map(function(t){return t=E(t),H(i?t.reverse():t)}),s=0,u=!1;return new F(function(){var r;return u||(r=o.map(function(t){return t.next()}),u=n?r.every(function(t){return t.done}):r.some(function(t){return t.done})),u?{value:void 0,done:!0}:N(t,s++,e.apply(null,r.map(function(t){return t.value})))})},i}function Vt(t,e){return t===e?t:R(t)?e:t.constructor(e)}function Ut(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ht(t){return g(t)?O:S(t)?T:P}function Gt(t){return Object.create((g(t)?$:S(t)?Q:X).prototype)}function Jt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Z.prototype.cacheResult.call(this)}function Yt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Zt(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function $t(t,e){if(!t)throw new Error(e)}function Qt(t){$t(t!==1/0,"Cannot perform this action with an infinite size.")}function Xt(t){if(Y(t)&&"string"!=typeof t)return t;if(A(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function te(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function ee(t){return"object"==typeof t&&(z(t)||Array.isArray(t)||te(t))}function re(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function ne(t,e){return z(t)?t.has(e):ee(t)&&J.call(t,e)}function ie(t,e,r){return z(t)?t.get(e,r):ne(t,e)?"function"==typeof t.get?t.get(e):t[e]:r}function oe(t){if(Array.isArray(t))return Zt(t);var e={};for(var r in t)J.call(t,r)&&(e[r]=t[r]);return e}function se(t,e){if(!ee(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(z(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!J.call(t,e))return t;var r=oe(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function ue(t,e,r){if(!ee(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(z(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(J.call(t,e)&&r===t[e])return t;var n=oe(t);return n[e]=r,n}function ae(t,e,r,n){n||(n=r,r=void 0);var i=function t(e,r,n,i,o,u){var a=r===s;if(i===n.length){var c=a?o:r,h=u(c);return h===c?r:h}if(!a&&!ee(r))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,i).map(re)+"]: "+r);var f=n[i];var l=a?s:ie(r,f,s);var p=t(l===s?e:z(l),l,n,i+1,o,u);return p===l?r:p===s?se(r,f):ue(a?e?Ue():{}:r,f,p)}(z(t),t,Xt(e),0,r,n);return i===s?r:i}function ce(t,e,r){return ae(t,e,s,function(){return r})}function he(t,e){return ce(this,t,e)}function fe(t,e){return ae(t,e,function(){return s})}function le(t){return fe(this,t)}function pe(t,e,r,n){return ae(t,[e],r,n)}function _e(t,e,r){return 1===arguments.length?t(this):pe(this,t,e,r)}function de(t,e,r){return ae(this,t,e,r)}function ve(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return we(this,t)}function ye(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return we(this,e,t)}function we(t,e,r){for(var n=[],i=0;i<e.length;i++){var o=O(e[i]);0!==o.size&&n.push(o)}return 0===n.length?t:0!==t.toSeq().size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var e=r?function(e,n){pe(t,n,s,function(t){return t===s?e:r(t,e,n)})}:function(e,r){t.set(r,e)},i=0;i<n.length;i++)n[i].forEach(e)}):t.constructor(n[0])}function me(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Ee(t,e)}function ge(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return Ee(e,r,t)}function be(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return ke(t,e)}function Se(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return ke(e,r,t)}function ke(t,e,r){return Ee(t,e,function(t){return function e(r,n,i){return ee(r)&&ee(n)?Ee(r,[n],e):t?t(r,n,i):n}}(r))}function Ee(t,e,r){if(!ee(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(z(t))return"function"==typeof r&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),i=t,o=n?T:O,s=n?function(e){i===t&&(i=oe(i)),i.push(e)}:function(e,n){var o=J.call(i,n),s=o&&r?r(i[n],e,n):e;o&&s===i[n]||(i===t&&(i=oe(i)),i[n]=s)},u=0;u<e.length;u++)o(e[u]).forEach(s);return i}function Oe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ke(this,t)}function Te(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return ke(this,e,t)}function Pe(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return ae(this,t,Ue(),function(t){return Ee(t,e)})}function Ie(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return ae(this,t,Ue(),function(t){return ke(t,e)})}function Re(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function De(){return this.__ownerID?this:this.__ensureOwner(new a)}function Me(){return this.__ensureOwner()}function ze(){return this.__altered}Rt.prototype.cacheResult=It.prototype.cacheResult=Dt.prototype.cacheResult=Mt.prototype.cacheResult=Jt;var xe=function(t){function e(e){return null==e?Ue():ct(e)&&!A(e)?e:Ue().withMutations(function(r){var n=t(e);Qt(n.size),n.forEach(function(t,e){return r.set(e,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ue().withMutations(function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return He(this,t,e)},e.prototype.remove=function(t){return He(this,t,s)},e.prototype.deleteAll=function(t){var e=E(t);return 0===e.size?this:this.withMutations(function(t){e.forEach(function(e){return t.remove(e)})})},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ue()},e.prototype.sort=function(t){return yr(Kt(this,t))},e.prototype.sortBy=function(t,e){return yr(Kt(this,e,t))},e.prototype.map=function(t,e){return this.withMutations(function(r){r.forEach(function(n,i){r.set(i,t.call(e,n,i,r))})})},e.prototype.__iterator=function(t,e){return new Fe(this,t,e)},e.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate(function(e){return n++,t(e[1],e[0],r)},e),n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ve(this.size,this._root,t,this.__hash):0===this.size?Ue():(this.__ownerID=t,this.__altered=!1,this)},e}(O);xe.isMap=ct;var Ae=xe.prototype;Ae[at]=!0,Ae.delete=Ae.remove,Ae.removeAll=Ae.deleteAll,Ae.setIn=he,Ae.removeIn=Ae.deleteIn=le,Ae.update=_e,Ae.updateIn=de,Ae.merge=Ae.concat=ve,Ae.mergeWith=ye,Ae.mergeDeep=Oe,Ae.mergeDeepWith=Te,Ae.mergeIn=Pe,Ae.mergeDeepIn=Ie,Ae.withMutations=Re,Ae.wasAltered=ze,Ae.asImmutable=Me,Ae["@@transducer/init"]=Ae.asMutable=De,Ae["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Ae["@@transducer/result"]=function(t){return t.asImmutable()};var Ce=function(t,e){this.ownerID=t,this.entries=e};Ce.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(lt(r,i[o][0]))return i[o][1];return n},Ce.prototype.update=function(t,e,r,n,i,o,c){for(var h=i===s,f=this.entries,l=0,p=f.length;l<p&&!lt(n,f[l][0]);l++);var _=l<p;if(_?f[l][1]===i:h)return this;if(u(c),(h||!_)&&u(o),!h||1!==f.length){if(!_&&!h&&f.length>=Qe)return function(t,e,r,n){t||(t=new a);for(var i=new qe(t,vt(r),[r,n]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}(t,f,n,i);var d=t&&t===this.ownerID,v=d?f:Zt(f);return _?h?l===p-1?v.pop():v[l]=v.pop():v[l]=[n,i]:v.push([n,i]),d?(this.entries=v,this):new Ce(t,v)}};var Le=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};Le.prototype.get=function(t,e,r,i){void 0===e&&(e=vt(r));var s=1<<((0===t?e:e>>>t)&o),u=this.bitmap;return 0==(u&s)?i:this.nodes[Ze(u&s-1)].get(t+n,e,r,i)},Le.prototype.update=function(t,e,r,u,a,c,h){void 0===r&&(r=vt(u));var f=(0===e?r:r>>>e)&o,l=1<<f,p=this.bitmap,_=0!=(p&l);if(!_&&a===s)return this;var d=Ze(p&l-1),v=this.nodes,y=_?v[d]:void 0,w=Ge(y,t,e+n,r,u,a,c,h);if(w===y)return this;if(!_&&w&&v.length>=Xe)return function(t,e,r,n,o){for(var s=0,u=new Array(i),a=0;0!==r;a++,r>>>=1)u[a]=1&r?e[s++]:void 0;return u[n]=o,new Be(t,s+1,u)}(t,v,p,f,w);if(_&&!w&&2===v.length&&Je(v[1^d]))return v[1^d];if(_&&w&&1===v.length&&Je(w))return w;var m=t&&t===this.ownerID,g=_?w?p:p^l:p|l,b=_?w?$e(v,d,w,m):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,s=0;s<n;s++)s===e&&(o=1),i[s]=t[s+o];return i}(v,d,m):function(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),s=0,u=0;u<i;u++)u===e?(o[u]=r,s=-1):o[u]=t[u+s];return o}(v,d,w,m);return m?(this.bitmap=g,this.nodes=b,this):new Le(t,g,b)};var Be=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};Be.prototype.get=function(t,e,r,i){void 0===e&&(e=vt(r));var s=(0===t?e:e>>>t)&o,u=this.nodes[s];return u?u.get(t+n,e,r,i):i},Be.prototype.update=function(t,e,r,i,u,a,c){void 0===r&&(r=vt(i));var h=(0===e?r:r>>>e)&o,f=u===s,l=this.nodes,p=l[h];if(f&&!p)return this;var _=Ge(p,t,e+n,r,i,u,a,c);if(_===p)return this;var d=this.count;if(p){if(!_&&--d<tr)return function(t,e,r,n){for(var i=0,o=0,s=new Array(r),u=0,a=1,c=e.length;u<c;u++,a<<=1){var h=e[u];void 0!==h&&u!==n&&(i|=a,s[o++]=h)}return new Le(t,i,s)}(t,l,d,h)}else d++;var v=t&&t===this.ownerID,y=$e(l,h,_,v);return v?(this.count=d,this.nodes=y,this):new Be(t,d,y)};var je=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};je.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(lt(r,i[o][0]))return i[o][1];return n},je.prototype.update=function(t,e,r,n,i,o,a){void 0===r&&(r=vt(n));var c=i===s;if(r!==this.keyHash)return c?this:(u(a),u(o),Ye(this,t,e,r,[n,i]));for(var h=this.entries,f=0,l=h.length;f<l&&!lt(n,h[f][0]);f++);var p=f<l;if(p?h[f][1]===i:c)return this;if(u(a),(c||!p)&&u(o),c&&2===l)return new qe(t,this.keyHash,h[1^f]);var _=t&&t===this.ownerID,d=_?h:Zt(h);return p?c?f===l-1?d.pop():d[f]=d.pop():d[f]=[n,i]:d.push([n,i]),_?(this.entries=d,this):new je(t,this.keyHash,d)};var qe=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};qe.prototype.get=function(t,e,r,n){return lt(r,this.entry[0])?this.entry[1]:n},qe.prototype.update=function(t,e,r,n,i,o,a){var c=i===s,h=lt(n,this.entry[0]);return(h?i===this.entry[1]:c)?this:(u(a),c?void u(o):h?t&&t===this.ownerID?(this.entry[1]=i,this):new qe(t,this.keyHash,[n,i]):(u(o),Ye(this,t,e,vt(n),[n,i])))},Ce.prototype.iterate=je.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},Le.prototype.iterate=Be.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},qe.prototype.iterate=function(t,e){return t(this.entry)};var Ke,Fe=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&We(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r=e.node,n=e.index++,i=void 0;if(r.entry){if(0===n)return Ne(t,r.entry)}else if(r.entries){if(n<=(i=r.entries.length-1))return Ne(t,r.entries[this._reverse?i-n:n])}else if(n<=(i=r.nodes.length-1)){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return Ne(t,o.entry);e=this._stack=We(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(F);function Ne(t,e){return N(t,e[0],e[1])}function We(t,e){return{node:t,index:0,__prev:e}}function Ve(t,e,r,n){var i=Object.create(Ae);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Ue(){return Ke||(Ke=Ve(0))}function He(t,e,r){var n,i;if(t._root){var o={value:!1},u={value:!1};if(n=Ge(t._root,t.__ownerID,0,void 0,e,r,o,u),!u.value)return t;i=t.size+(o.value?r===s?-1:1:0)}else{if(r===s)return t;i=1,n=new Ce(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Ve(i,n):Ue()}function Ge(t,e,r,n,i,o,a,c){return t?t.update(e,r,n,i,o,a,c):o===s?t:(u(c),u(a),new qe(e,n,[i,o]))}function Je(t){return t.constructor===qe||t.constructor===je}function Ye(t,e,r,i,s){if(t.keyHash===i)return new je(e,i,[t.entry,s]);var u,a=(0===r?t.keyHash:t.keyHash>>>r)&o,c=(0===r?i:i>>>r)&o,h=a===c?[Ye(t,e,r+n,i,s)]:(u=new qe(e,i,s),a<c?[t,u]:[u,t]);return new Le(e,1<<a|1<<c,h)}function Ze(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function $e(t,e,r,n){var i=n?t:Zt(t);return i[e]=r,i}var Qe=i/4,Xe=i/2,tr=i/4,er="@@__IMMUTABLE_LIST__@@";function rr(t){return Boolean(t&&t[er])}var nr=function(t){function e(e){var r=hr();if(null==e)return r;if(rr(e))return e;var o=t(e),s=o.size;return 0===s?r:(Qt(s),s>0&&s<i?cr(0,s,n,null,new or(o.toArray())):r.withMutations(function(t){t.setSize(s),o.forEach(function(e,r){return t.set(r,e)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=h(this,t))>=0&&t<this.size){var r=pr(this,t+=this._origin);return r&&r.array[t&o]}return e},e.prototype.set=function(t,e){return function(t,e,r){if((e=h(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?_r(t,e).set(0,r):_r(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,o={value:!1};e>=dr(t._capacity)?n=fr(n,t.__ownerID,0,e,r,o):i=fr(i,t.__ownerID,t._level,e,r,o);if(!o.value)return t;if(t.__ownerID)return t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t;return cr(t._origin,t._capacity,t._level,i,n)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=n,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):hr()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(r){_r(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])})},e.prototype.pop=function(){return _r(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){_r(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])})},e.prototype.shift=function(){return _r(this,1)},e.prototype.concat=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++){var i=e[n],o=t("string"!=typeof i&&V(i)?i:[i]);0!==o.size&&r.push(o)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(t){r.forEach(function(e){return e.forEach(function(e){return t.push(e)})})}):this.constructor(r[0])},e.prototype.setSize=function(t){return _r(this,0,t)},e.prototype.map=function(t,e){var r=this;return this.withMutations(function(n){for(var i=0;i<r.size;i++)n.set(i,t.call(e,n.get(i),i,n))})},e.prototype.slice=function(t,e){var r=this.size;return l(t,e,r)?this:_r(this,p(t,r),_(e,r))},e.prototype.__iterator=function(t,e){var r=e?this.size:0,n=ar(this,e);return new F(function(){var i=n();return i===ur?{value:void 0,done:!0}:N(t,e?--r:r++,i)})},e.prototype.__iterate=function(t,e){for(var r,n=e?this.size:0,i=ar(this,e);(r=i())!==ur&&!1!==t(r,e?--n:n++,this););return n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?cr(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?hr():(this.__ownerID=t,this.__altered=!1,this)},e}(T);nr.isList=rr;var ir=nr.prototype;ir[er]=!0,ir.delete=ir.remove,ir.merge=ir.concat,ir.setIn=he,ir.deleteIn=ir.removeIn=le,ir.update=_e,ir.updateIn=de,ir.mergeIn=Pe,ir.mergeDeepIn=Ie,ir.withMutations=Re,ir.wasAltered=ze,ir.asImmutable=Me,ir["@@transducer/init"]=ir.asMutable=De,ir["@@transducer/step"]=function(t,e){return t.push(e)},ir["@@transducer/result"]=function(t){return t.asImmutable()};var or=function(t,e){this.array=t,this.ownerID=e};or.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var i=r>>>e&o;if(i>=this.array.length)return new or([],t);var s,u=0===i;if(e>0){var a=this.array[i];if((s=a&&a.removeBefore(t,e-n,r))===a&&u)return this}if(u&&!s)return this;var c=lr(this,t);if(!u)for(var h=0;h<i;h++)c.array[h]=void 0;return s&&(c.array[i]=s),c},or.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var i,s=r-1>>>e&o;if(s>=this.array.length)return this;if(e>0){var u=this.array[s];if((i=u&&u.removeAfter(t,e-n,r))===u&&s===this.array.length-1)return this}var a=lr(this,t);return a.array.splice(s+1),i&&(a.array[s]=i),a};var sr,ur={};function ar(t,e){var r=t._origin,o=t._capacity,s=dr(o),u=t._tail;return a(t._root,t._level,0);function a(t,c,h){return 0===c?function(t,n){var a=n===s?u&&u.array:t&&t.array,c=n>r?0:r-n,h=o-n;h>i&&(h=i);return function(){if(c===h)return ur;var t=e?--h:c++;return a&&a[t]}}(t,h):function(t,s,u){var c,h=t&&t.array,f=u>r?0:r-u>>s,l=1+(o-u>>s);l>i&&(l=i);return function(){for(;;){if(c){var t=c();if(t!==ur)return t;c=null}if(f===l)return ur;var r=e?--l:f++;c=a(h&&h[r],s-n,u+(r<<s))}}}(t,c,h)}}function cr(t,e,r,n,i,o,s){var u=Object.create(ir);return u.size=e-t,u._origin=t,u._capacity=e,u._level=r,u._root=n,u._tail=i,u.__ownerID=o,u.__hash=s,u.__altered=!1,u}function hr(){return sr||(sr=cr(0,0,n))}function fr(t,e,r,i,s,a){var c,h=i>>>r&o,f=t&&h<t.array.length;if(!f&&void 0===s)return t;if(r>0){var l=t&&t.array[h],p=fr(l,e,r-n,i,s,a);return p===l?t:((c=lr(t,e)).array[h]=p,c)}return f&&t.array[h]===s?t:(a&&u(a),c=lr(t,e),void 0===s&&h===c.array.length-1?c.array.pop():c.array[h]=s,c)}function lr(t,e){return e&&t&&e===t.ownerID?t:new or(t?t.array.slice():[],e)}function pr(t,e){if(e>=dr(t._capacity))return t._tail;if(e<1<<t._level+n){for(var r=t._root,i=t._level;r&&i>0;)r=r.array[e>>>i&o],i-=n;return r}}function _r(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var i=t.__ownerID||new a,s=t._origin,u=t._capacity,c=s+e,h=void 0===r?u:r<0?u+r:s+r;if(c===s&&h===u)return t;if(c>=h)return t.clear();for(var f=t._level,l=t._root,p=0;c+p<0;)l=new or(l&&l.array.length?[void 0,l]:[],i),p+=1<<(f+=n);p&&(c+=p,s+=p,h+=p,u+=p);for(var _=dr(u),d=dr(h);d>=1<<f+n;)l=new or(l&&l.array.length?[l]:[],i),f+=n;var v=t._tail,y=d<_?pr(t,h-1):d>_?new or([],i):v;if(v&&d>_&&c<u&&v.array.length){for(var w=l=lr(l,i),m=f;m>n;m-=n){var g=_>>>m&o;w=w.array[g]=lr(w.array[g],i)}w.array[_>>>n&o]=v}if(h<u&&(y=y&&y.removeAfter(i,0,h)),c>=d)c-=d,h-=d,f=n,l=null,y=y&&y.removeBefore(i,0,c);else if(c>s||d<_){for(p=0;l;){var b=c>>>f&o;if(b!==d>>>f&o)break;b&&(p+=(1<<f)*b),f-=n,l=l.array[b]}l&&c>s&&(l=l.removeBefore(i,f,c-p)),l&&d<_&&(l=l.removeAfter(i,f,d-p)),p&&(c-=p,h-=p)}return t.__ownerID?(t.size=h-c,t._origin=c,t._capacity=h,t._level=f,t._root=l,t._tail=y,t.__hash=void 0,t.__altered=!0,t):cr(c,h,f,l,y)}function dr(t){return t<i?0:t-1>>>n<<n}var vr,yr=function(t){function e(t){return null==t?mr():ht(t)?t:mr().withMutations(function(e){var r=O(t);Qt(r.size),r.forEach(function(t,r){return e.set(r,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):mr()},e.prototype.set=function(t,e){return gr(this,t,e)},e.prototype.remove=function(t){return gr(this,t,s)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],r)},e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?wr(e,r,t,this.__hash):0===this.size?mr():(this.__ownerID=t,this._map=e,this._list=r,this)},e}(xe);function wr(t,e,r,n){var i=Object.create(yr.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function mr(){return vr||(vr=wr(Ue(),hr()))}function gr(t,e,r){var n,o,u=t._map,a=t._list,c=u.get(e),h=void 0!==c;if(r===s){if(!h)return t;a.size>=i&&a.size>=2*u.size?(n=(o=a.filter(function(t,e){return void 0!==t&&c!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=o.__ownerID=t.__ownerID)):(n=u.remove(e),o=c===a.size-1?a.pop():a.set(c,void 0))}else if(h){if(r===a.get(c)[1])return t;n=u,o=a.set(c,[e,r])}else n=u.set(e,a.size),o=a.set(a.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=o,t.__hash=void 0,t):wr(n,o)}yr.isOrderedMap=ht,yr.prototype[x]=!0,yr.prototype.delete=yr.prototype.remove;var br="@@__IMMUTABLE_STACK__@@";function Sr(t){return Boolean(t&&t[br])}var kr=function(t){function e(t){return null==t?Pr():Sr(t)?t:Pr().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var r=this._head;for(t=h(this,t);r&&t--;)r=r.next;return r?r.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:t[n],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Tr(e,r)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&Sr(e))return e;Qt(e.size);var r=this.size,n=this._head;return e.__iterate(function(t){r++,n={value:t,next:n}},!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):Tr(r,n)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Pr()},e.prototype.slice=function(e,r){if(l(e,r,this.size))return this;var n=p(e,this.size);if(_(r,this.size)!==this.size)return t.prototype.slice.call(this,e,r);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Tr(i,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Tr(this.size,this._head,t,this.__hash):0===this.size?Pr():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var r=this;if(e)return new tt(this.toArray()).__iterate(function(e,n){return t(e,n,r)},e);for(var n=0,i=this._head;i&&!1!==t(i.value,n++,this);)i=i.next;return n},e.prototype.__iterator=function(t,e){if(e)return new tt(this.toArray()).__iterator(t,e);var r=0,n=this._head;return new F(function(){if(n){var e=n.value;return n=n.next,N(t,r++,e)}return{value:void 0,done:!0}})},e}(T);kr.isStack=Sr;var Er,Or=kr.prototype;function Tr(t,e,r,n){var i=Object.create(Or);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Pr(){return Er||(Er=Tr(0))}Or[br]=!0,Or.shift=Or.pop,Or.unshift=Or.push,Or.unshiftAll=Or.pushAll,Or.withMutations=Re,Or.wasAltered=ze,Or.asImmutable=Me,Or["@@transducer/init"]=Or.asMutable=De,Or["@@transducer/step"]=function(t,e){return t.unshift(e)},Or["@@transducer/result"]=function(t){return t.asImmutable()};var Ir="@@__IMMUTABLE_SET__@@";function Rr(t){return Boolean(t&&t[Ir])}function Dr(t){return Rr(t)&&A(t)}function Mr(t,e){if(t===e)return!0;if(!w(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||g(t)!==g(e)||S(t)!==S(e)||A(t)!==A(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!k(t);if(A(t)){var n=t.entries();return e.every(function(t,e){var i=n.next().value;return i&&lt(i[1],t)&&(r||lt(i[0],e))})&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var u=!0,a=e.__iterate(function(e,n){if(r?!t.has(e):i?!lt(e,t.get(n,s)):!lt(t.get(n,s),e))return u=!1,!1});return u&&t.size===a}function zr(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function xr(t){if(!t||"object"!=typeof t)return t;if(!w(t)){if(!ee(t))return t;t=Z(t)}if(g(t)){var e={};return t.__iterate(function(t,r){e[r]=xr(t)}),e}var r=[];return t.__iterate(function(t){r.push(xr(t))}),r}var Ar=function(t){function e(e){return null==e?qr():Rr(e)&&!A(e)?e:qr().withMutations(function(r){var n=t(e);Qt(n.size),n.forEach(function(t){return r.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(O(t).keySeq())},e.intersect=function(t){return(t=E(t).toArray()).length?Lr.intersect.apply(e(t.pop()),t):qr()},e.union=function(t){return(t=E(t).toArray()).length?Lr.union.apply(e(t.pop()),t):qr()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Br(this,this._map.set(t,t))},e.prototype.remove=function(t){return Br(this,this._map.remove(t))},e.prototype.clear=function(){return Br(this,this._map.clear())},e.prototype.map=function(t,e){var r=this,n=[],i=[];return this.forEach(function(o){var s=t.call(e,o,o,r);s!==o&&(n.push(o),i.push(s))}),this.withMutations(function(t){n.forEach(function(e){return t.remove(e)}),i.forEach(function(e){return t.add(e)})})},e.prototype.union=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return 0===(e=e.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(r){for(var n=0;n<e.length;n++)t(e[n]).forEach(function(t){return r.add(t)})}):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map(function(e){return t(e)});var n=[];return this.forEach(function(t){e.every(function(e){return e.includes(t)})||n.push(t)}),this.withMutations(function(t){n.forEach(function(e){t.remove(e)})})},e.prototype.subtract=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map(function(e){return t(e)});var n=[];return this.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.push(t)}),this.withMutations(function(t){n.forEach(function(e){t.remove(e)})})},e.prototype.sort=function(t){return nn(Kt(this,t))},e.prototype.sortBy=function(t,e){return nn(Kt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate(function(e){return t(e,e,r)},e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(P);Ar.isSet=Rr;var Cr,Lr=Ar.prototype;function Br(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function jr(t,e){var r=Object.create(Lr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function qr(){return Cr||(Cr=jr(Ue()))}Lr[Ir]=!0,Lr.delete=Lr.remove,Lr.merge=Lr.concat=Lr.union,Lr.withMutations=Re,Lr.asImmutable=Me,Lr["@@transducer/init"]=Lr.asMutable=De,Lr["@@transducer/step"]=function(t,e){return t.add(e)},Lr["@@transducer/result"]=function(t){return t.asImmutable()},Lr.__empty=qr,Lr.__make=jr;var Kr,Fr=function(t){function e(t,r,n){if(!(this instanceof e))return new e(t,r,n);if($t(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<t&&(n=-n),this._start=t,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-t)/n-1)+1),0===this.size){if(Kr)return Kr;Kr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+h(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,r){return l(t,r,this.size)?this:(t=p(t,this.size),(r=_(r,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(r,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==t(i,e?r-++o:o++,this);)i+=e?-n:n;return o},e.prototype.__iterator=function(t,e){var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;return new F(function(){if(o===r)return{value:void 0,done:!0};var s=i;return i+=e?-n:n,N(t,e?r-++o:o++,s)})},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:Mr(this,t)},e}(Q);function Nr(t,e,r){for(var n=Xt(e),i=0;i!==n.length;)if((t=ie(t,n[i++],s))===s)return r;return t}function Wr(t,e){return Nr(this,t,e)}function Vr(t,e){return Nr(t,e,s)!==s}function Ur(){Qt(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t}E.isIterable=w,E.isKeyed=g,E.isIndexed=S,E.isAssociative=k,E.isOrdered=A,E.Iterator=F,zr(E,{toArray:function(){Qt(this.size);var t=new Array(this.size||0),e=g(this),r=0;return this.__iterate(function(n,i){t[r++]=e?[i,n]:n}),t},toIndexedSeq:function(){return new Rt(this)},toJS:function(){return xr(this)},toKeyedSeq:function(){return new It(this,!0)},toMap:function(){return xe(this.toKeyedSeq())},toObject:Ur,toOrderedMap:function(){return yr(this.toKeyedSeq())},toOrderedSet:function(){return nn(g(this)?this.valueSeq():this)},toSet:function(){return Ar(g(this)?this.valueSeq():this)},toSetSeq:function(){return new Dt(this)},toSeq:function(){return S(this)?this.toIndexedSeq():g(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return kr(g(this)?this.valueSeq():this)},toList:function(){return nr(g(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Vt(this,jt(this,t))},includes:function(t){return this.some(function(e){return lt(e,t)})},entries:function(){return this.__iterator(B)},every:function(t,e){Qt(this.size);var r=!0;return this.__iterate(function(n,i,o){if(!t.call(e,n,i,o))return r=!1,!1}),r},filter:function(t,e){return Vt(this,Ct(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return Qt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Qt(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate(function(n){r?r=!1:e+=t,e+=null!=n?n.toString():""}),e},keys:function(){return this.__iterator(C)},map:function(t,e){return Vt(this,xt(this,t,e))},reduce:function(t,e,r){return Yr(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return Yr(this,t,e,r,arguments.length<2,!0)},reverse:function(){return Vt(this,At(this,!0))},slice:function(t,e){return Vt(this,Lt(this,t,e,!0))},some:function(t,e){return!this.every(Qr(t),e)},sort:function(t){return Vt(this,Kt(this,t))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return c(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var n=xe().asMutable();return t.__iterate(function(i,o){n.update(e.call(r,i,o,t),0,function(t){return t+1})}),n.asImmutable()}(this,t,e)},equals:function(t){return Mr(this,t)},entrySeq:function(){var t=this;if(t._cache)return new tt(t._cache);var e=t.toSeq().map($r).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Qr(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate(function(r,i,o){if(t.call(e,r,i,o))return n=[i,r],!1}),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(f,null,t)},flatMap:function(t,e){return Vt(this,function(t,e,r){var n=Ht(t);return t.toSeq().map(function(i,o){return n(e.call(r,i,o,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return Vt(this,qt(this,t,!0))},fromEntrySeq:function(){return new Mt(this)},get:function(t,e){return this.find(function(e,r){return lt(r,t)},void 0,e)},getIn:Wr,groupBy:function(t,e){return function(t,e,r){var n=g(t),i=(A(t)?yr():xe()).asMutable();t.__iterate(function(o,s){i.update(e.call(r,o,s,t),function(t){return(t=t||[]).push(n?[s,o]:o),t})});var o=Ht(t);return i.map(function(e){return Vt(t,o(e))}).asImmutable()}(this,t,e)},has:function(t){return this.get(t,s)!==s},hasIn:function(t){return Vr(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:E(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:E(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return lt(e,t)})},keySeq:function(){return this.toSeq().map(Zr).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Ft(this,t)},maxBy:function(t,e){return Ft(this,e,t)},min:function(t){return Ft(this,t?Xr(t):en)},minBy:function(t,e){return Ft(this,e?Xr(e):en,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Vt(this,Bt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Qr(t),e)},sortBy:function(t,e){return Vt(this,Kt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Vt(this,function(t,e,r){var n=Gt(t);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var s=0;return t.__iterate(function(t,i,u){return e.call(r,t,i,u)&&++s&&n(t,i,o)}),s},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var s=t.__iterator(B,i),u=!0;return new F(function(){if(!u)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var i=t.value,a=i[0],c=i[1];return e.call(r,c,a,o)?n===B?t:N(n,a,c,t):(u=!1,{value:void 0,done:!0})})},n}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Qr(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=A(t),r=g(t),n=e?1:0;return function(t,e){return e=pt(e,3432918353),e=pt(e<<15|e>>>-15,461845907),e=pt(e<<13|e>>>-13,5),e=pt((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=_t((e=pt(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){n=31*n+rn(vt(t),vt(e))|0}:function(t,e){n=n+rn(vt(t),vt(e))|0}:e?function(t){n=31*n+vt(t)|0}:function(t){n=n+vt(t)|0}),n)}(this))}});var Hr=E.prototype;Hr[y]=!0,Hr[K]=Hr.values,Hr.toJSON=Hr.toArray,Hr.__toStringMapper=re,Hr.inspect=Hr.toSource=function(){return this.toString()},Hr.chain=Hr.flatMap,Hr.contains=Hr.includes,zr(O,{flip:function(){return Vt(this,zt(this))},mapEntries:function(t,e){var r=this,n=0;return Vt(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],n++,r)}).fromEntrySeq())},mapKeys:function(t,e){var r=this;return Vt(this,this.toSeq().flip().map(function(n,i){return t.call(e,n,i,r)}).flip())}});var Gr=O.prototype;Gr[m]=!0,Gr[K]=Hr.entries,Gr.toJSON=Ur,Gr.__toStringMapper=function(t,e){return re(e)+": "+re(t)},zr(T,{toKeyedSeq:function(){return new It(this,!1)},filter:function(t,e){return Vt(this,Ct(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Vt(this,At(this,!1))},slice:function(t,e){return Vt(this,Lt(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=p(t,t<0?this.count():this.size);var n=this.slice(0,t);return Vt(this,1===r?n:n.concat(Zt(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Vt(this,qt(this,t,!1))},get:function(t,e){return(t=h(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,r){return r===t},void 0,e)},has:function(t){return(t=h(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Vt(this,function(t,e){var r=Gt(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return t.__iterate(function(t){return(!o||!1!==r(e,o++,i))&&!1!==r(t,o++,i)},n),o},r.__iteratorUncached=function(r,n){var i,o=t.__iterator(L,n),s=0;return new F(function(){return(!i||s%2)&&(i=o.next()).done?i:s%2?N(r,s++,e):N(r,s++,i.value,i)})},r}(this,t))},interleave:function(){var t=[this].concat(Zt(arguments)),e=Wt(this.toSeq(),Q.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Vt(this,r)},keySeq:function(){return Fr(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Vt(this,Bt(this,t,e,!1))},zip:function(){var t=[this].concat(Zt(arguments));return Vt(this,Wt(this,tn,t))},zipAll:function(){var t=[this].concat(Zt(arguments));return Vt(this,Wt(this,tn,t,!0))},zipWith:function(t){var e=Zt(arguments);return e[0]=this,Vt(this,Wt(this,t,e))}});var Jr=T.prototype;function Yr(t,e,r,n,i,o){return Qt(t.size),t.__iterate(function(t,o,s){i?(i=!1,r=t):r=e.call(n,r,t,o,s)},o),r}function Zr(t,e){return e}function $r(t,e){return[e,t]}function Qr(t){return function(){return!t.apply(this,arguments)}}function Xr(t){return function(){return-t.apply(this,arguments)}}function tn(){return Zt(arguments)}function en(t,e){return t<e?1:t>e?-1:0}function rn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Jr[b]=!0,Jr[x]=!0,zr(P,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),P.prototype.has=Hr.includes,P.prototype.contains=P.prototype.includes,zr($,O.prototype),zr(Q,T.prototype),zr(X,P.prototype);var nn=function(t){function e(t){return null==t?an():Dr(t)?t:an().withMutations(function(e){var r=P(t);Qt(r.size),r.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(O(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Ar);nn.isOrderedSet=Dr;var on,sn=nn.prototype;function un(t,e){var r=Object.create(sn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function an(){return on||(on=un(mr()))}sn[x]=!0,sn.zip=Jr.zip,sn.zipWith=Jr.zipWith,sn.__empty=an,sn.__make=un;var cn=function(t,e){var r,n=function(o){var s=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var u=Object.keys(t),a=i._indices={};i._name=e,i._keys=u,i._defaultValues=t;for(var c=0;c<u.length;c++){var h=u[c];a[h]=c,i[h]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+ln(this)+' with property "'+h+'" since that property name is part of the Record API.'):_n(i,h)}}this.__ownerID=void 0,this._values=nr().withMutations(function(t){t.setSize(s._keys.length),O(o).forEach(function(e,r){t.set(s._indices[r],e===s._defaultValues[r]?void 0:e)})})},i=n.prototype=Object.create(hn);return i.constructor=n,e&&(n.displayName=e),n};cn.prototype.toString=function(){for(var t,e=ln(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)e+=(n?", ":"")+(t=r[n])+": "+re(this.get(t));return e+" }"},cn.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&pn(this).equals(pn(t))},cn.prototype.hashCode=function(){return pn(this).hashCode()},cn.prototype.has=function(t){return this._indices.hasOwnProperty(t)},cn.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],n=this._values.get(r);return void 0===n?this._defaultValues[t]:n},cn.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return fn(this,r)}return this},cn.prototype.remove=function(t){return this.set(t)},cn.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:fn(this,t)},cn.prototype.wasAltered=function(){return this._values.wasAltered()},cn.prototype.toSeq=function(){return pn(this)},cn.prototype.toJS=function(){return xr(this)},cn.prototype.entries=function(){return this.__iterator(B)},cn.prototype.__iterator=function(t,e){return pn(this).__iterator(t,e)},cn.prototype.__iterate=function(t,e){return pn(this).__iterate(t,e)},cn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?fn(this,e,t):(this.__ownerID=t,this._values=e,this)},cn.isRecord=M,cn.getDescriptiveName=ln;var hn=cn.prototype;function fn(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function ln(t){return t.constructor.displayName||t.constructor.name||"Record"}function pn(t){return ot(t._keys.map(function(e){return[e,t.get(e)]}))}function _n(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){$t(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}hn[D]=!0,hn.delete=hn.remove,hn.deleteIn=hn.removeIn=le,hn.getIn=Wr,hn.hasIn=Hr.hasIn,hn.merge=ve,hn.mergeWith=ye,hn.mergeIn=Pe,hn.mergeDeep=Oe,hn.mergeDeepWith=Te,hn.mergeDeepIn=Ie,hn.setIn=he,hn.update=_e,hn.updateIn=de,hn.withMutations=Re,hn.asMutable=De,hn.asImmutable=Me,hn[K]=hn.entries,hn.toJSON=hn.toObject=Hr.toObject,hn.inspect=hn.toSource=function(){return this.toString()};var dn,vn=function(t){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this._value=t,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(dn)return dn;dn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return lt(this._value,t)},e.prototype.slice=function(t,r){var n=this.size;return l(t,r,n)?this:new e(this._value,_(r,n)-p(t,n))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return lt(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return lt(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var r=this.size,n=0;n!==r&&!1!==t(this._value,e?r-++n:n++,this););return n},e.prototype.__iterator=function(t,e){var r=this,n=this.size,i=0;return new F(function(){return i===n?{value:void 0,done:!0}:N(t,e?n-++i:i++,r._value)})},e.prototype.equals=function(t){return t instanceof e?lt(this._value,t._value):Mr(t)},e}(Q);function yn(t,e){return function t(e,r,n,i,o,s){var u=Array.isArray(n)?Q:te(n)?$:null;if(u){if(~e.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");e.push(n),o&&""!==i&&o.push(i);var a=r.call(s,i,u(n).map(function(i,s){return t(e,r,i,s,o,n)}),o&&o.slice());return e.pop(),o&&o.pop(),a}return n}([],e||wn,t,"",e&&e.length>2?[]:void 0,{"":t})}function wn(t,e){return g(e)?e.toMap():e.toList()}var mn="4.0.0-rc.11",gn={version:mn,Collection:E,Iterable:E,Seq:Z,Map:xe,OrderedMap:yr,List:nr,Stack:kr,Set:Ar,OrderedSet:nn,Record:cn,Range:Fr,Repeat:vn,is:lt,fromJS:yn,hash:vt,isImmutable:z,isCollection:w,isKeyed:g,isIndexed:S,isAssociative:k,isOrdered:A,isValueObject:ft,isSeq:R,isList:rr,isMap:ct,isOrderedMap:ht,isStack:Sr,isSet:Rr,isOrderedSet:Dr,isRecord:M,get:ie,getIn:Nr,has:ne,hasIn:Vr,merge:me,mergeDeep:be,mergeWith:ge,mergeDeepWith:Se,remove:se,removeIn:fe,set:ue,setIn:ce,update:pe,updateIn:ae},bn=E;e.default=gn},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);e.Position=class extends(n.Record({row:0,col:0})){constructor(t){t?super(t):super()}translated(t){return this.translatedRC(t.row,t.col)}translatedRC(t,e){return this.merge({row:this.row+t,col:this.col+e})}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.I_CYAN=1]="I_CYAN",t[t.J_BLUE=2]="J_BLUE",t[t.L_ORANGE=3]="L_ORANGE",t[t.O_YELLOW=4]="O_YELLOW",t[t.S_GREEN=5]="S_GREEN",t[t.T_PURPLE=6]="T_PURPLE",t[t.Z_RED=7]="Z_RED"}(e.BlockColor||(e.BlockColor={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(4),i=r(1),o=r(0);e.DIR_UP=new i.Position({row:1,col:0}),e.DIR_DOWN=new i.Position({row:-1,col:0}),e.DIR_LEFT=new i.Position({row:0,col:-1}),e.DIR_RIGHT=new i.Position({row:0,col:1}),e.ALL_DIRECTIONS=o.List([e.DIR_UP,e.DIR_DOWN,e.DIR_LEFT,e.DIR_RIGHT]),e.isPieceOnGround=function(t,r){return r.isPieceValid(t)&&t.maybeTranslated(e.DIR_DOWN,t=>r.isPieceValid(t))===t},e.getGhostPiece=function(t,r){let n,i=t;do{i=(n=i).maybeTranslated(e.DIR_DOWN,t=>r.isPieceValid(t))}while(i!==n);return n},e.canPieceMove=function(t,r){return!e.ALL_DIRECTIONS.map(e=>t.maybeTranslated(e,t=>r.isPieceValid(t))).filter(e=>e!==t).isEmpty()},e.isAllClear=function(t){return t.blocks.isEmpty()},e.getSpawnedPiece=function(t,e){return new n.Piece({piecePrototype:t,orientationId:0,position:e.spawnPos})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(5),i=r(1),o=r(0),s=r(21),u=r(6);e.Piece=class extends(o.Record({piecePrototype:new u.PiecePrototype(o.List(),o.Map(),o.Map()),orientationId:0,position:new i.Position})){constructor(t){t?super(t):super()}getBlocks(){return this.piecePrototype.getOrientation(this.orientationId).blocks.entrySeq().map(t=>new s.PieceBlock(t[1],t[0]))}getMatrixBlocks(){return this.getBlocks().map(t=>n.MatrixBlock.fromPieceBlock(t,this))}maybeTranslated(t,e){const r=this.merge({position:this.position.translated(t)});return e(r)?r:this}maybeTransitioned(t,e){for(const r of t){const t=this.merge({orientationId:r.newOrientationId,position:this.position.translated(r.offset)});if(e(t))return t}return this}maybeRotatedCw(t){return this.maybeTransitioned(this.piecePrototype.getCwTransitions(this.orientationId),t)}maybeRotatedCcw(t){return this.maybeTransitioned(this.piecePrototype.getCcwTransitions(this.orientationId),t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t,e){this.block=t,this.matrixPos=e}static fromPieceBlock(t,e){return new n(t.block,t.relativePos.translated(e.position))}}e.MatrixBlock=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t,e,r){this.orientations=t,this.cwTransitions=e,this.ccwTransitions=r}static getTransitionsFromMap(t,e){const r=e.get(t);if(!r)throw new Error(`Failed to get transition list on prototype at orientation ${t}`);return r}getOrientation(t){const e=this.orientations.get(t);if(!e)throw new Error(`Failed to get orientation ${t} on prototype with ${this.orientations.size} orientations`);return e}getCwTransitions(t){return n.getTransitionsFromMap(t,this.cwTransitions)}getCcwTransitions(t){return n.getTransitionsFromMap(t,this.ccwTransitions)}}e.PiecePrototype=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(4);e.PiecePrototypeView=class{constructor(t,e,r,n){this.visibleRows=t,this.visibleCols=e,this.blockSize=r,this.blockRenderer=n,this.canvas=document.createElement("canvas"),this.canvas.width=this.getWidth(),this.canvas.height=this.getHeight(),this.ctx2d=this.canvas.getContext("2d")}getWidth(){return this.visibleCols*this.blockSize}getHeight(){return this.visibleRows*this.blockSize}getImageSource(){return this.canvas}update(t){if(t===this.lastRenderedPiecePrototype)return;if(this.ctx2d.clearRect(0,0,this.canvas.width,this.canvas.height),void 0===t)return;const e=new n.Piece({piecePrototype:t}).getBlocks(),r=e.map(t=>t.relativePos.row).reduce((t,e)=>t>e?t:e,-1/0),i=e.map(t=>t.relativePos.row).reduce((t,e)=>t>e?e:t,1/0),o=e.map(t=>t.relativePos.col).reduce((t,e)=>t>e?t:e,-1/0),s=e.map(t=>t.relativePos.col).reduce((t,e)=>t>e?e:t,1/0),u=(i+r)/2,a=(s+o)/2;e.forEach(t=>{const e=t.relativePos.col-a,r=-(t.relativePos.row-u),n=this.blockSize*e+this.getWidth()/2-this.blockSize/2,i=this.blockSize*r+this.getHeight()/2-this.blockSize/2;this.blockRenderer.drawBlock(this.ctx2d,t.block,n,i,this.blockSize)}),this.lastRenderedPiecePrototype=t}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(0),o=r(23),s=r(5);e.Matrix=class extends(i.Record({numRows:40,numCols:10,blocks:i.Map(),spawnPos:new n.Position({row:19,col:4})})){constructor(t){t?super(t):super()}isPositionValidRC(t,e){return 0<=t&&t<this.numRows&&0<=e&&e<this.numCols}isPositionValid(t){return this.isPositionValidRC(t.row,t.col)}isPositionEmpty(t){return this.isPositionValid(t)&&void 0===this.blocks.get(t)}getBlocks(){return this.blocks.entrySeq().map(t=>new s.MatrixBlock(t[1],t[0]))}isPieceValid(t){for(const e of t.getMatrixBlocks())if(!this.isPositionEmpty(e.matrixPos))return!1;return!0}lockPiece(t){if(!this.isPieceValid(t))return new o.MatrixLockPieceResult(this,i.Set([]));let e=this.blocks;for(const r of t.getMatrixBlocks())e=e.set(r.matrixPos,r.block);const r=t.getMatrixBlocks().map(t=>t.matrixPos.row).toSet().filter(t=>i.Range(0,this.numCols).map(e=>new n.Position({row:t,col:e})).filter(t=>void 0===e.get(t)).isEmpty());if(r.isEmpty())return new o.MatrixLockPieceResult(this.merge({blocks:e}),i.Set([]));const s=e.filter((t,e)=>!r.contains(e.row)).mapKeys(t=>new n.Position({row:t.row-r.filter(e=>e<t.row).size,col:t.col}));return new o.MatrixLockPieceResult(this.merge({blocks:s}),r)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.SOFT_DROP=0]="SOFT_DROP",t[t.HARD_DROP=1]="HARD_DROP",t[t.MOVE_L=2]="MOVE_L",t[t.MOVE_R=3]="MOVE_R",t[t.ROTATE_CW=4]="ROTATE_CW",t[t.ROTATE_CCW=5]="ROTATE_CCW",t[t.HOLD=6]="HOLD"}(e.TetrisActionEventType||(e.TetrisActionEventType={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TetrisProps=class{constructor(t,e,r){this.gravityRate=t,this.lockDelay=e,this.pieceClearDelay=r}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),i=r(12),o=r(13),s=r(8),u=r(4),a=r(14),c=r(3),h=r(30);class f extends(n.Record({matrix:new s.Matrix,fallingPiece:new u.Piece,heldPiece:void 0,queue:a.BagGenerator.newBagGenerator(o.ALL_SRS_TETROMINOES,new i.Random(0n))})){constructor(t){t?super(t):super()}movePiece(t){return this.merge({fallingPiece:this.fallingPiece.maybeTranslated(t,t=>this.matrix.isPieceValid(t))})}hardDrop(){return this.merge({fallingPiece:c.getGhostPiece(this.fallingPiece,this.matrix)})}rotateCw(){return this.merge({fallingPiece:this.fallingPiece.maybeRotatedCw(t=>this.matrix.isPieceValid(t))})}rotateCcw(){return this.merge({fallingPiece:this.fallingPiece.maybeRotatedCcw(t=>this.matrix.isPieceValid(t))})}lockPieceAndSpawnNext(){const t=this.matrix.lockPiece(this.fallingPiece),e=this.merge({matrix:t.newMatrix,fallingPiece:c.getSpawnedPiece(this.queue.get(),t.newMatrix),queue:this.queue.next()});return new h.SimLockPieceResult(e,t)}swap(){return void 0===this.heldPiece?this.merge({heldPiece:this.fallingPiece.piecePrototype,fallingPiece:c.getSpawnedPiece(this.queue.get(),this.matrix),queue:this.queue.next()}):this.merge({heldPiece:this.fallingPiece.piecePrototype,fallingPiece:c.getSpawnedPiece(this.heldPiece,this.matrix)})}static newTetrisSim(t,e){return new f({matrix:t,fallingPiece:c.getSpawnedPiece(e.get(),t),queue:e.next()})}}e.TetrisSim=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=6364136223846793005n,i=1442695040888963407n,o=BigInt(1)<<BigInt(64);function s(t,e,r){return e+Number(t%BigInt(r-e))}class u{constructor(t){this.value=(t*n+i)%o}getWithMod(t){return s(this.value,0,t)}getInRange(t,e){return s(this.value,t,e)}next(){return new u(this.value)}}e.Random=u},function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=r(0),o=r(26),s=r(6),u=n(r(27)),a=r(2),c=[[0,-1],[0,0],[0,1],[0,2]],h=[[1,-1],[0,-1],[0,0],[0,1]],f=[[1,1],[0,-1],[0,0],[0,1]],l=[[1,0],[1,1],[0,0],[0,1]],p=[[1,0],[1,1],[0,-1],[0,0]],_=[[1,0],[0,-1],[0,0],[0,1]],d=[[1,-1],[1,0],[0,0],[0,1]],v=[[[0,0]],[[-1,0]],[[-1,-1]],[[0,-1]]],y=[[[0,0],[0,-1],[0,2],[0,-1],[0,2]],[[0,-1],[0,0],[0,0],[1,0],[-2,0]],[[1,-1],[1,1],[1,-2],[0,1],[0,-2]],[[1,0],[1,0],[1,0],[-1,0],[2,0]]],w=[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,1],[-1,1],[2,0],[2,1]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,-1],[-1,-1],[2,0],[2,-1]]],m=[[[0,0]],[[0,0]],[[0,0]],[[0,0]]],g=new o.Block({color:a.BlockColor.I_CYAN}),b=new o.Block({color:a.BlockColor.J_BLUE}),S=new o.Block({color:a.BlockColor.L_ORANGE}),k=new o.Block({color:a.BlockColor.O_YELLOW}),E=new o.Block({color:a.BlockColor.S_GREEN}),O=new o.Block({color:a.BlockColor.T_PURPLE}),T=new o.Block({color:a.BlockColor.Z_RED});e.SRS_I=new s.PiecePrototype(u.orientationsFromBlocks(c,g),u.cwTransitionsFromKickTable(y),u.ccwTransitionsFromKickTable(y)),e.SRS_J=new s.PiecePrototype(u.orientationsFromBlocks(h,b),u.cwTransitionsFromKickTable(w),u.ccwTransitionsFromKickTable(w)),e.SRS_L=new s.PiecePrototype(u.orientationsFromBlocks(f,S),u.cwTransitionsFromKickTable(w),u.ccwTransitionsFromKickTable(w)),e.SRS_O=new s.PiecePrototype(u.orientationsFromBlocks(l,k),u.cwTransitionsFromKickTable(v),u.ccwTransitionsFromKickTable(v)),e.SRS_S=new s.PiecePrototype(u.orientationsFromBlocks(p,E),u.cwTransitionsFromKickTable(w),u.ccwTransitionsFromKickTable(w)),e.SRS_T=new s.PiecePrototype(u.orientationsFromBlocks(_,O),u.cwTransitionsFromKickTable(w),u.ccwTransitionsFromKickTable(w)),e.SRS_Z=new s.PiecePrototype(u.orientationsFromBlocks(d,T),u.cwTransitionsFromKickTable(w),u.ccwTransitionsFromKickTable(w)),e.ALL_SRS_TETROMINOES=i.List([e.SRS_I,e.SRS_J,e.SRS_L,e.SRS_O,e.SRS_S,e.SRS_T,e.SRS_Z]),e.NES_I=new s.PiecePrototype(u.orientationsFromBlocks(c,g),u.cwTransitionsFromKickTable(m),u.ccwTransitionsFromKickTable(m)),e.NES_J=new s.PiecePrototype(u.orientationsFromBlocks(h,b),u.cwTransitionsFromKickTable(m),u.ccwTransitionsFromKickTable(m)),e.NES_L=new s.PiecePrototype(u.orientationsFromBlocks(f,S),u.cwTransitionsFromKickTable(m),u.ccwTransitionsFromKickTable(m)),e.NES_O=new s.PiecePrototype(u.orientationsFromBlocks(l,k),u.cwTransitionsFromKickTable(m),u.ccwTransitionsFromKickTable(m)),e.NES_S=new s.PiecePrototype(u.orientationsFromBlocks(p,E),u.cwTransitionsFromKickTable(m),u.ccwTransitionsFromKickTable(m)),e.NES_T=new s.PiecePrototype(u.orientationsFromBlocks(_,O),u.cwTransitionsFromKickTable(m),u.ccwTransitionsFromKickTable(m)),e.NES_Z=new s.PiecePrototype(u.orientationsFromBlocks(d,T),u.cwTransitionsFromKickTable(m),u.ccwTransitionsFromKickTable(m)),e.ALL_NES_TETROMINOES=i.List([e.NES_I,e.NES_J,e.NES_L,e.NES_O,e.NES_S,e.NES_T,e.NES_Z])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t,e){if(e<0||e>=t.size)throw new Error(`Index out of bounds. Got ${e}. Acceptable range: [0, ${t.size})`);this.bag=t,this.curIndex=e%this.bag.size}get(){return this.bag.get(this.curIndex)}next(){return new n(this.bag,(this.curIndex+1)%this.bag.size)}}e.OrderedGenerator=n;class i{constructor(t,e){this.bag=t,this.random=e}get(){return this.bag.get(this.random.getWithMod(this.bag.size))}next(){return new i(this.bag,this.random.next())}}e.RandomGenerator=i;class o{constructor(t,e,r){if(t.isEmpty()||e.isEmpty())throw new Error("Empty bag or remaining is invalid.");this.bag=t,this.remaining=e,this.random=r}curIndex(){return this.random.getWithMod(this.remaining.size)}get(){return this.remaining.get(this.curIndex())}next(){return 1==this.remaining.size?new o(this.bag,this.bag,this.random.next()):new o(this.bag,this.remaining.remove(this.curIndex()),this.random.next())}static newBagGenerator(t,e){return new o(t,t,e)}}e.BagGenerator=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);e.Dispatcher=class{constructor(){this.registeredCallbacks=n.Set()}registerCallback(t){this.registeredCallbacks=this.registeredCallbacks.add(t)}removeRegisteredCallback(t){this.registeredCallbacks.remove(t)}dispatch(t){const e=this.registeredCallbacks;for(const r of e)r(t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.SOFT_DROP=0]="SOFT_DROP",t[t.HARD_DROP=1]="HARD_DROP",t[t.MOVE_L=2]="MOVE_L",t[t.MOVE_R=3]="MOVE_R",t[t.ROTATE_CW=4]="ROTATE_CW",t[t.ROTATE_CCW=5]="ROTATE_CCW",t[t.HOLD=6]="HOLD"}(e.TetrisInputEventType||(e.TetrisInputEventType={}))},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(18);r(36);const o=n(r(40)),s=document.createElement("canvas");s.width=800,s.height=600;const u=s.getContext("2d");document.getElementById("root").append(s);const a=new i.PracticeScreen;a.init();let c=performance.now();const h=new o.default;h.showPanel(0),document.body.appendChild(h.dom),window.requestAnimationFrame(function t(){h.begin();const e=performance.now(),r=(e-c)/1e3;a.tick(r),u.clearRect(0,0,s.width,s.height),a.render(s),c=e,h.end(),window.requestAnimationFrame(t)})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),i=r(19),o=r(20),s=r(7),u=r(22),a=r(8),c=r(24),h=r(13),f=r(33),l=r(34),p=r(14),_=r(12);e.PracticeScreen=class{constructor(){const t=p.BagGenerator.newBagGenerator(n.List(h.ALL_SRS_TETROMINOES),new _.Random(BigInt(Date.now())));this.game=c.newTetrisGame(new a.Matrix({numRows:40,numCols:10}),t,1,3,.5),this.virtualGamepad=new l.VirtualGamepad(.2,60),this.keyboard=new f.KeyboardInputSource,this.keyboard.registerInputHandler(this.virtualGamepad.inputHandler),this.inputEventBuffer=[],this.virtualGamepad.registerActionHandler(t=>this.inputEventBuffer.push(t)),this.matrixView=new o.MatrixView(20.5,10,20,new i.SimpleBlockRenderer),this.queueView=new u.QueueView(5,4.5,4.5,10,new i.SimpleBlockRenderer),this.holdView=new s.PiecePrototypeView(4.5,4.5,10,new i.SimpleBlockRenderer)}init(){this.keyboard.init(),this.matrixView.update(this.game.sim.matrix,this.game.sim.fallingPiece)}exit(){this.keyboard.tearDown()}tick(t){this.virtualGamepad.update(t);const e=this.inputEventBuffer.slice();for(const t of e)this.game=this.game.handleActionEvent(t);this.game=this.game.tick(t),this.inputEventBuffer=[]}render(t){const e=t.getContext("2d");this.matrixView.update(this.game.sim.matrix,this.game.sim.fallingPiece);const r=this.matrixView.getImageSource(),n=t.width/2-this.matrixView.getWidth()/2;e.drawImage(r,n,0),e.strokeRect(n,0,this.matrixView.getWidth(),this.matrixView.getHeight()),this.queueView.update(this.game.sim.queue);const i=this.queueView.getPieceViews();let o=0;for(let t=0;t<this.queueView.previewLen;t++){const r=i[t],s=n+this.matrixView.getWidth()+5;e.drawImage(r.getImageSource(),s,o),e.strokeRect(s,o,r.getWidth(),r.getHeight()),o+=r.getHeight()+5}this.holdView.update(this.game.sim.heldPiece);const s=this.holdView.getImageSource(),u=n-5-this.holdView.getWidth();e.drawImage(s,u,0),e.strokeRect(u,0,this.holdView.getWidth(),this.holdView.getHeight())}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(2);e.SimpleBlockRenderer=class{getFillStyle(t){switch(t){case n.BlockColor.UNKNOWN:return"fuchsia";case n.BlockColor.I_CYAN:return"cyan";case n.BlockColor.J_BLUE:return"blue";case n.BlockColor.L_ORANGE:return"orange";case n.BlockColor.O_YELLOW:return"gold";case n.BlockColor.S_GREEN:return"green";case n.BlockColor.T_PURPLE:return"purple";case n.BlockColor.Z_RED:return"red"}}drawBlock(t,e,r,n,i){t.save(),t.beginPath(),t.rect(r,n,i,i),t.fillStyle=this.getFillStyle(e.color),t.strokeStyle="black",t.fill(),t.stroke(),t.closePath(),t.restore()}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(3);e.MatrixView=class{constructor(t,e,r,n){this.visibleRows=t,this.visibleCols=e,this.blockSize=r,this.blockRenderer=n,this.canvas=document.createElement("canvas"),this.canvas.width=this.getWidth(),this.canvas.height=this.getHeight(),this.ctx2d=this.canvas.getContext("2d")}getWidth(){return this.visibleCols*this.blockSize}getHeight(){return this.visibleRows*this.blockSize}getImageSource(){return this.canvas}drawBlock(t){const e=t.matrixPos.row,r=t.matrixPos.col,n=this.getHeight()-this.blockSize-e*this.blockSize,i=this.blockSize*r;this.blockRenderer.drawBlock(this.ctx2d,t.block,i,n,this.blockSize)}update(t,e){this.lastDrawnMatrix===t&&this.lastDrawnFallingPiece===e||(this.ctx2d.save(),this.ctx2d.clearRect(0,0,this.canvas.width,this.canvas.height),t.getBlocks().forEach(t=>this.drawBlock(t)),this.ctx2d.save(),this.ctx2d.globalAlpha=.5,n.getGhostPiece(e,t).getMatrixBlocks().forEach(t=>{this.drawBlock(t)}),this.ctx2d.restore(),e.getMatrixBlocks().forEach(t=>this.drawBlock(t)),this.ctx2d.restore(),this.lastDrawnMatrix=t,this.lastDrawnFallingPiece=e)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PieceBlock=class{constructor(t,e){this.block=t,this.relativePos=e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(7);e.QueueView=class{constructor(t,e,r,i,o){this.previewLen=t,this.previews=new Array(t);for(let t=0;t<this.previewLen;t++){let s=i;t>0&&(s=i/2),this.previews[t]=new n.PiecePrototypeView(e,r,s,o)}}getPieceViews(){return this.previews.slice()}update(t){if(t===this.lastRenderedQueue)return;let e=t;for(let r=0;r<this.previewLen;r++){const n=e.get();this.previews[r].update(n),e=e.next(),this.lastRenderedQueue=t}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MatrixLockPieceResult=class{constructor(t,e){this.newMatrix=t,this.clearedRows=e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(25),i=r(10),o=r(11);e.newTetrisGame=function(t,e,r,s,u){const a=o.TetrisSim.newTetrisSim(t,e),c=new i.TetrisProps(r,s,u);return new n.FallingPieceState({sim:a,props:c})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),i=r(9),o=r(10),s=r(11),u=r(3),a=r(31),c=r(32);class h extends(n.Record({sim:new s.TetrisSim,props:new o.TetrisProps(0,3,1),gravityAccumulator:0,lockCountdown:3,canHold:!0})){constructor(t){t?super(t):super()}maybeGameOver(){return this.sim.matrix.isPieceValid(this.sim.fallingPiece)?this:new c.GameOverState(this.sim,this.props)}handleActionEvent(t){switch(t.type){case i.TetrisActionEventType.MOVE_L:return this.merge({sim:this.sim.movePiece(u.DIR_LEFT)});case i.TetrisActionEventType.MOVE_R:return this.merge({sim:this.sim.movePiece(u.DIR_RIGHT)});case i.TetrisActionEventType.SOFT_DROP:return this.merge({sim:this.sim.movePiece(u.DIR_DOWN)});case i.TetrisActionEventType.HARD_DROP:return this.merge({sim:this.sim.hardDrop()}).lockPiece();case i.TetrisActionEventType.HOLD:return this.hold();case i.TetrisActionEventType.ROTATE_CW:return this.merge({sim:this.sim.rotateCw()});case i.TetrisActionEventType.ROTATE_CCW:return this.merge({sim:this.sim.rotateCcw()})}return this}hold(){return this.canHold?this.merge({canHold:!1,gravityAccumulator:0,lockCountdown:this.props.lockDelay,sim:this.sim.swap()}).maybeGameOver():this}lockPiece(){const t=this.sim.lockPieceAndSpawnNext(),e=new h({sim:t.newSim,props:this.props}).maybeGameOver();return!t.matrixLockPieceResult.clearedRows.isEmpty()&&this.props.pieceClearDelay>0?new a.DelayState(this,e,this.props.pieceClearDelay,this.props.pieceClearDelay):e}tick(t){if(u.isPieceOnGround(this.sim.fallingPiece,this.sim.matrix)){const e=this.lockCountdown-t;return e<=0?this.lockPiece():this.merge({lockCountdown:e})}{let e=this.gravityAccumulator+t*this.props.gravityRate,r=this.sim.fallingPiece;for(;e>=1&&!u.isPieceOnGround(r,this.sim.matrix);)r=r.maybeTranslated(u.DIR_DOWN,t=>this.sim.matrix.isPieceValid(t)),e-=1;return this.merge({sim:this.sim.merge({fallingPiece:r}),gravityAccumulator:e})}}}e.FallingPieceState=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),i=r(2);e.Block=class extends(n.Record({color:i.BlockColor.UNKNOWN})){constructor(t){t?super(t):super()}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),i=r(28),o=r(29),s=r(1);function u(t,e){const r=t.length,i=[];for(let u=0;u<r;u++){let a=e(u);for(;a<0;)a+=r;const c=a%r,h=t[u],f=t[c],l=Math.min(h.length,f.length);h.length!=f.length&&console.warn(`Kick-table row lengths mismatched. Using ${l} = min(${h.length}, ${f.length})`);const p=[];for(let e=0;e<l;e++){const r=t[u][e][0]-t[c][e][0],n=t[u][e][1]-t[c][e][1],i=new o.Transition(c,new s.Position({row:r,col:n}));p.push(i)}i.push([u,n.List(p)])}return n.Map(i)}e.orientationsFromBlocks=function(t,e){const r=n.List(t.map(t=>new s.Position({row:t[0],col:t[1]})));return n.List(n.Range(0,4).map(t=>new i.Orientation(n.Map(r.map(e=>(function(t,e){switch(e%4){case 0:return t;case 1:return new s.Position({row:-t.col,col:t.row});case 2:return new s.Position({row:-t.row,col:-t.col});case 3:return new s.Position({row:t.col,col:-t.row});default:return t}})(e,t)).map(t=>[t,e])))))},e.transitionsFromKickTable=u,e.cwTransitionsFromKickTable=function(t){return u(t,t=>t+1)},e.ccwTransitionsFromKickTable=function(t){return u(t,t=>t-1)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Orientation=class{constructor(t){this.blocks=t}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Transition=class{constructor(t,e){this.newOrientationId=t,this.offset=e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SimLockPieceResult=class{constructor(t,e){this.newSim=t,this.matrixLockPieceResult=e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t,e,r,n){this.sim=t.sim,this.props=t.props,this.beforeState=t,this.afterState=e,this.totalDelay=r,this.delayCountdown=n}handleActionEvent(t){return this}tick(t){const e=this.delayCountdown-t;return e<=0?this.afterState:new n(this.beforeState,this.afterState,this.totalDelay,e)}}e.DelayState=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GameOverState=class{constructor(t,e){this.sim=t,this.props=e}handleActionEvent(t){return this}tick(t){return this}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),i=r(15),o=r(16);function s(t,e,r){let i=t;return e.forEach(t=>{i=i.set(t,i.get(t,n.List()).push(r))}),i}function u(t){let e=n.Map();return e=s(e,t.softDropKeys,o.TetrisInputEventType.SOFT_DROP),e=s(e,t.hardDropKeys,o.TetrisInputEventType.HARD_DROP),e=s(e,t.moveLeftKeys,o.TetrisInputEventType.MOVE_L),e=s(e,t.moveRightKeys,o.TetrisInputEventType.MOVE_R),e=s(e,t.rotateCwKeys,o.TetrisInputEventType.ROTATE_CW),e=s(e,t.rotateCcwKeys,o.TetrisInputEventType.ROTATE_CCW),e=s(e,t.holdKeys,o.TetrisInputEventType.HOLD)}e.parseKeyMap=u,e.DEFAULT_KEYMAP={hardDropKeys:n.List(["Space"]),softDropKeys:n.List(["ArrowDown"]),moveLeftKeys:n.List(["ArrowLeft"]),moveRightKeys:n.List(["ArrowRight"]),rotateCwKeys:n.List(["KeyX","ArrowUp"]),rotateCcwKeys:n.List(["KeyZ"]),holdKeys:n.List(["ShiftLeft"])};e.KeyboardInputSource=class{constructor(t){this.dispatcher=new i.Dispatcher,this.keyDownListener=t=>this.handleKeyDown(t),this.keyUpListener=t=>this.handleKeyUp(t),void 0===t&&(t=u(e.DEFAULT_KEYMAP)),this.keyToActionsMap=t}registerInputHandler(t){this.dispatcher.registerCallback(t)}init(){document.addEventListener("keydown",this.keyDownListener),document.addEventListener("keyup",this.keyUpListener)}tearDown(){document.removeEventListener("keydown",this.keyDownListener),document.removeEventListener("keyup",this.keyUpListener)}handleKeyDown(t){if(!t.repeat&&this.keyToActionsMap.has(t.code))for(const e of this.keyToActionsMap.get(t.code))this.dispatcher.dispatch({type:e,keyDown:!0})}handleKeyUp(t){if(!t.repeat&&this.keyToActionsMap.has(t.code))for(const e of this.keyToActionsMap.get(t.code))this.dispatcher.dispatch({type:e,keyDown:!1})}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(9),i=r(16),o=r(15),s=r(35);e.VirtualGamepad=class{constructor(t,e){this.actionDispatcher=new o.Dispatcher,this.inputHandler=t=>this.handleInputEvent(t),this.buttonSoftDrop=new s.RepeaterButton(t,e,()=>this.actionDispatcher.dispatch({type:n.TetrisActionEventType.SOFT_DROP})),this.buttonHardDrop=new s.ToggleButton(()=>this.actionDispatcher.dispatch({type:n.TetrisActionEventType.HARD_DROP})),this.buttonMoveLR=new s.Joystick2(new s.RepeaterButton(t,e,()=>this.actionDispatcher.dispatch({type:n.TetrisActionEventType.MOVE_L})),new s.RepeaterButton(t,e,()=>this.actionDispatcher.dispatch({type:n.TetrisActionEventType.MOVE_R}))),this.buttonRotateCW=new s.ToggleButton(()=>this.actionDispatcher.dispatch({type:n.TetrisActionEventType.ROTATE_CW})),this.buttonRotateCCW=new s.ToggleButton(()=>this.actionDispatcher.dispatch({type:n.TetrisActionEventType.ROTATE_CCW})),this.buttonHold=new s.ToggleButton(()=>this.actionDispatcher.dispatch({type:n.TetrisActionEventType.HOLD}))}update(t){this.buttonMoveLR.update(t),this.buttonSoftDrop.update(t),this.buttonHardDrop.update(t),this.buttonRotateCW.update(t),this.buttonRotateCCW.update(t),this.buttonHold.update(t)}handleInputEvent(t){switch(t.type){case i.TetrisInputEventType.MOVE_L:t.keyDown?this.buttonMoveLR.down1():this.buttonMoveLR.up1();break;case i.TetrisInputEventType.MOVE_R:t.keyDown?this.buttonMoveLR.down2():this.buttonMoveLR.up2();break;case i.TetrisInputEventType.ROTATE_CW:t.keyDown?this.buttonRotateCW.downEvent():this.buttonRotateCW.upEvent();break;case i.TetrisInputEventType.ROTATE_CCW:t.keyDown?this.buttonRotateCCW.downEvent():this.buttonRotateCCW.upEvent();break;case i.TetrisInputEventType.SOFT_DROP:t.keyDown?this.buttonSoftDrop.downEvent():this.buttonSoftDrop.upEvent();break;case i.TetrisInputEventType.HARD_DROP:t.keyDown?this.buttonHardDrop.downEvent():this.buttonHardDrop.upEvent();break;case i.TetrisInputEventType.HOLD:t.keyDown?this.buttonHold.downEvent():this.buttonHold.upEvent()}}registerActionHandler(t){this.actionDispatcher.registerCallback(t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ToggleButton=class{constructor(t){this.action=t,this.pressed=!1}upEvent(){this.pressed=!1}downEvent(){this.pressed||(this.pressed=!0,this.action())}update(t){}};e.RepeaterButton=class{constructor(t,e,r){this.repeatDelay=t,this.repeatRate=e,this.action=r,this.pressed=!1,this.repeatDelayCountdown=t,this.repeatCounter=0}downEvent(){this.pressed||(this.pressed=!0,this.repeatCounter=1)}upEvent(){this.pressed=!1,this.repeatDelayCountdown=this.repeatDelay,this.repeatCounter=0}update(t){for(this.pressed&&(this.repeatDelayCountdown>0&&(this.repeatDelayCountdown-=t,this.repeatDelayCountdown<0&&(this.repeatDelayCountdown=0)),this.repeatDelayCountdown<=0&&(this.repeatCounter+=t*this.repeatRate));this.repeatCounter>=1;)this.action(),this.repeatCounter-=1}};e.Joystick2=class{constructor(t,e){this.button1=t,this.button2=e}down1(){this.button1.downEvent(),this.button2.upEvent()}down2(){this.button2.downEvent(),this.button1.upEvent()}up1(){this.button1.upEvent()}up2(){this.button2.upEvent()}update(t){this.button1.update(t),this.button2.update(t)}}},function(t,e,r){var n=r(37);"string"==typeof n&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};r(39)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(38)(!1)).push([t.i,"canvas {\n    display: block;\n    margin: 2px;\n    border: 2px solid red;\n    image-rendering: optimizeSpeed; /* Older versions of FF          */\n    image-rendering: -moz-crisp-edges; /* FF 6.0+                       */\n    image-rendering: -o-crisp-edges; /* OS X & Windows Opera (12.02+) */\n    image-rendering: pixelated; /* Awesome future-browsers       */\n    -ms-interpolation-mode: nearest-neighbor; /* IE                            */\n}",""])},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=(s=n,u=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u),"/*# ".concat(a," */")),o=n.sources.map(function(t){return"/*# sourceURL=".concat(n.sourceRoot).concat(t," */")});return[r].concat(o).concat([i]).join("\n")}var s,u,a;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(r,"}"):r}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var s=0;s<t.length;s++){var u=t[s];null!=u[0]&&n[u[0]]||(r&&!u[2]?u[2]=r:r&&(u[2]="(".concat(u[2],") and (").concat(r,")")),e.push(u))}},e}},function(t,e,r){"use strict";var n,i={},o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},s=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}();function u(t,e){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(u):r.push(n[s]={id:s,parts:[u]})}return r}function a(t,e){for(var r=0;r<t.length;r++){var n=t[r],o=i[n.id],s=0;if(o){for(o.refs++;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(d(n.parts[s],e))}else{for(var u=[];s<n.parts.length;s++)u.push(d(n.parts[s],e));i[n.id]={id:n.id,refs:1,parts:u}}}}function c(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var n=r.nc;n&&(t.attributes.nonce=n)}if(Object.keys(t.attributes).forEach(function(r){e.setAttribute(r,t.attributes[r])}),"function"==typeof t.insert)t.insert(e);else{var i=s(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var h,f=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function l(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=f(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}var p=null,_=0;function d(t,e){var r,n,i;if(e.singleton){var o=_++;r=p||(p=c(e)),n=l.bind(null,r,o,!1),i=l.bind(null,r,o,!0)}else r=c(e),n=function(t,e,r){var n=r.css,i=r.media,o=r.sourceMap;if(i&&t.setAttribute("media",i),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,r,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o());var r=u(t,e);return a(r,e),function(t){for(var n=[],o=0;o<r.length;o++){var s=r[o],c=i[s.id];c&&(c.refs--,n.push(c))}t&&a(u(t,e),e);for(var h=0;h<n.length;h++){var f=n[h];if(0===f.refs){for(var l=0;l<f.parts.length;l++)f.parts[l]();delete i[f.id]}}}}},function(t,e,r){var n;t.exports=((n=function(){function t(t){return i.appendChild(t.dom),t}function e(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";r=t}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(t){t.preventDefault(),e(++r%i.children.length)},!1);var o=(performance||Date).now(),s=o,u=0,a=t(new n.Panel("FPS","#0ff","#002")),c=t(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=t(new n.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:i,addPanel:t,showPanel:e,begin:function(){o=(performance||Date).now()},end:function(){u++;var t=(performance||Date).now();if(c.update(t-o,200),t>s+1e3&&(a.update(1e3*u/(t-s),100),s=t,u=0,h)){var e=performance.memory;h.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:i,setMode:e}}).Panel=function(t,e,r){var n=1/0,i=0,o=Math.round,s=o(window.devicePixelRatio||1),u=80*s,a=48*s,c=3*s,h=2*s,f=3*s,l=15*s,p=74*s,_=30*s,d=document.createElement("canvas");d.width=u,d.height=a,d.style.cssText="width:80px;height:48px";var v=d.getContext("2d");return v.font="bold "+9*s+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=r,v.fillRect(0,0,u,a),v.fillStyle=e,v.fillText(t,c,h),v.fillRect(f,l,p,_),v.fillStyle=r,v.globalAlpha=.9,v.fillRect(f,l,p,_),{dom:d,update:function(a,y){n=Math.min(n,a),i=Math.max(i,a),v.fillStyle=r,v.globalAlpha=1,v.fillRect(0,0,u,l),v.fillStyle=e,v.fillText(o(a)+" "+t+" ("+o(n)+"-"+o(i)+")",c,h),v.drawImage(d,f+s,l,p-s,_,f,l,p-s,_),v.fillRect(f+p-s,l,s,_),v.fillStyle=r,v.globalAlpha=.9,v.fillRect(f+p-s,l,s,o((1-a/y)*_))}}},n)}],[[17,1]]]);